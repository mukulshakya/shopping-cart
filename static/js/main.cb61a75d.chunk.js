(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{113:function(e,t,a){},150:function(e,t,a){},183:function(e,t,a){e.exports=a(356)},188:function(e,t,a){},212:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),l=(a(188),a(7)),u=a.n(l),o=a(49),s=a(17),d=a(6),p=(a(113),a(68),a(50)),m=a(365),f=a(12),b=Object(f.atom)({key:"currentUserState",default:null}),g=Object(f.atom)({key:"errorMsgState",default:null}),v=Object(f.atom)({key:"categoryListState",default:[]}),E=Object(f.atom)({key:"productListState",default:[]}),y=Object(f.atom)({key:"cartListState",default:[]}),O=Object(f.atom)({key:"orderListState",default:[]}),j=a(42),h=(a(212),a(357)),x=a(361),k=a(364),w=a(177),S=a(367),C=a(368),I=a(369),P=a(370),L=a(163),M=a.n(L).a.create({baseURL:"https://heeko-ecommerce-api.herokuapp.com/v1"});M.interceptors.request.use(function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("token"))){e.next=3;break}return e.abrupt("return",Object(j.a)(Object(j.a)({},t),{},{headers:{Authorization:a}}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var T={},R=function(e){var t;return(null===(t=e.response)||void 0===t?void 0:t.data)||{status:!1,message:"Unexpected error",errors:[]}};T.register=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/register",t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T.login=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/login",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T.profile=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/profile");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),T.products=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/products",{params:t});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T.categories=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/categories");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),T.addToCart=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.quantity=t.quantity||1,e.next=4,M.post("/cart",t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T.removeFromCart=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.quantity=t.quantity||1,e.next=4,M.put("/cart",t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T.getCart=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/cart");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),T.placeOrder=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/order",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T.getMyOrders=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/order");case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",R(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var V=T,D=a(35),z=a(41),q=h.a.Header,A=x.a.Search;var B=function(e){var t=e.setIsLoginModalVisible,a=Object(f.useRecoilState)(b),c=Object(d.a)(a,2),i=c[0],l=c[1],o=Object(f.useRecoilState)(y),m=Object(d.a)(o,2),g=m[0],v=m[1],E=Object(n.useState)(!1),O=Object(d.a)(E,2),h=O[0],x=O[1],L=Object(D.g)(),M=Object(D.f)();Object(n.useEffect)((function(){T()}),[]);var T=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.profile();case 2:return(t=e.sent).status&&l(Object(j.a)({},t.data)),e.next=6,V.getCart();case 6:(a=e.sent).status&&v(a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),localStorage.removeItem("token"),setTimeout((function(){l(null),x(!1),M.push("/")}),1e3);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(q,{style:{background:"white",padding:"0 20%",fontSize:"25px"}},r.a.createElement(z.b,{to:"/"},r.a.createElement("div",{id:"logo"},r.a.createElement(S.a,null),r.a.createElement("span",null,"\xa0SHOP"))),r.a.createElement(A,{style:{width:"50%","justify-content":"center",margin:"0 20px"},placeholder:"input search text",onSearch:function(e){window.location=L.pathname.startsWith("/products")?"".concat(L.pathname,"?search=").concat(e):"/products?search=".concat(e)},enterButton:!0}),i&&r.a.createElement(z.b,{to:"/cart"},r.a.createElement(k.a,{count:g.length},r.a.createElement(w.a,{title:"Cart"},r.a.createElement(C.a,{style:{fontSize:"30px",lineHeight:"100%"}})))),i&&r.a.createElement(z.b,{to:"/orders"},r.a.createElement(w.a,{title:"Orders"},r.a.createElement(I.a,{style:{fontSize:"28px",lineHeight:"100%"}}))),i?r.a.createElement(w.a,{title:i.email},r.a.createElement(p.a,{icon:r.a.createElement(P.a,null),onClick:R,style:{marginLeft:3},loading:h},"LOGOUT")):r.a.createElement(p.a,{icon:r.a.createElement(P.a,null),onClick:t},"LOGIN / SIGNUP"))};a(266);var W=function(e){var t=e.data;return r.a.createElement("div",{id:"image-wrapper"},r.a.createElement("img",{src:t.image,alt:t.name||"Category"}),r.a.createElement("div",{style:{position:"relative"},id:"category-wrapper"},r.a.createElement("span",{id:"category"},t.name||"category")))};a(267);var _=function(e){var t=e.categories;return r.a.createElement("div",{id:"images-wrapper"},t.map((function(e){return r.a.createElement(z.b,{to:"/products/".concat(e._id),key:e._id},r.a.createElement(W,{data:e,key:e._id}))})))},F=(a(150),a(371));var H=function(e){var t=e.isLoading,a=Object(n.useState)("flex"),c=Object(d.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){!t&&setTimeout((function(){return l("None")}),600)}),[t]),r.a.createElement("div",{id:"wrapper",style:{opacity:t?1:0,display:i,position:"absolute",zIndex:999,background:"rgba(0,0,0,0.8)",transition:"all 500ms"}},r.a.createElement(F.a,null))},N=a(128),U=a(358),G=a(359),Y=N.a.TabPane,J={labelCol:{span:8},wrapperCol:{span:16}},K={wrapperCol:{offset:8,span:16}};function Q(e){var t=e.currentTab,a=e.setIsLoginModalVisible,c=Object(f.useRecoilState)(g),i=Object(d.a)(c,2),l=(i[0],i[1]),o=Object(f.useRecoilState)(b),m=Object(d.a)(o,2),v=(m[0],m[1]),E=Object(n.useState)(!1),O=Object(d.a)(E,2),h=O[0],k=O[1],w=Object(f.useRecoilState)(y),S=Object(d.a)(w,2),C=(S[0],S[1]),I=function(){var e=Object(s.a)(u.a.mark((function e(n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),r={},2!=t){e.next=8;break}return e.next=5,V.register(n);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,V.login(n);case 10:r=e.sent;case 11:if(!r.status){e.next=21;break}return localStorage.setItem("token",r.data.token),v(Object(j.a)({},r.data.user)),a(),e.next=17,V.getCart();case 17:(c=e.sent).status&&C(c.data),e.next=23;break;case 21:l(r.message),setTimeout((function(){return l(null)}),2e3);case 23:k(!1);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(U.a,Object.assign({},J,{name:"basic",initialValues:{remember:!0},onFinish:I}),r.a.createElement(U.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},r.a.createElement(x.a,null)),r.a.createElement(U.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(x.a.Password,null)),r.a.createElement(U.a.Item,K,r.a.createElement(p.a,{type:"primary",htmlType:"submit",disabled:h},h?r.a.createElement(F.a,{style:{color:"black"}}):"Submit")))}var $=function(e){var t=e.isLoginModalVisible,a=e.setIsLoginModalVisible,c=Object(n.useState)(1),i=Object(d.a)(c,2),l=i[0],u=i[1];return r.a.createElement("div",{id:"wrapper"},r.a.createElement(G.a,{centered:!0,visible:t,onOk:a,onCancel:a,footer:null},r.a.createElement(N.a,{defaultActiveKey:"1",onChange:function(e){return u(e)}},["Login","Sign Up","Admin Login"].map((function(e,t){return r.a.createElement(Y,{tab:e,key:t+1},r.a.createElement(Q,{currentTab:l,setIsLoginModalVisible:a}))})))))};var X=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),b=l[0],E=l[1],y=Object(f.useRecoilState)(g),O=Object(d.a)(y,2),j=O[0],h=O[1],x=Object(f.useRecoilState)(v),k=Object(d.a)(x,2),w=k[0],S=k[1],C=Object(f.useResetRecoilState)(v);Object(n.useEffect)((function(){return I(),function(){return C()}}),[]);var I=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.categories();case 2:t=e.sent,c(!1),t.status?S(Object(o.a)(t.data)):(h(t.message),setTimeout((function(){return h(null)}),2e3));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(H,{isLoading:a}),r.a.createElement(B,{setIsLoginModalVisible:function(){return E(!b)}}),r.a.createElement("div",{id:"body"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},r.a.createElement(z.b,{to:"/products"},r.a.createElement(p.a,{type:"primary",size:"medium"},"View All"))),r.a.createElement(_,{categories:w})),r.a.createElement("div",{style:{position:"absolute",zIndex:10}},r.a.createElement($,{isLoginModalVisible:b,setIsLoginModalVisible:function(){return E(!b)}})),j&&r.a.createElement("div",{id:"alert"},r.a.createElement(m.a,{message:"Error",description:j,type:"error",closable:!0,onClose:function(){return h(null)}})))},Z=a(84),ee=(a(355),a(81)),te=a.n(ee);a(162);var ae=function(e){var t=e.product;return r.a.createElement("div",null,r.a.createElement("h3",{style:{cursor:"default"}},t.name),r.a.createElement("div",null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u20b9",t.discountedPrice,"  "),t.discountedPrice!==t.actualPrice&&r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:11,color:"gray",textDecoration:"line-through",display:"inline-block",margin:"0 5px"}},"\u20b9",t.actualPrice),r.a.createElement("span",{style:{fontSize:10,color:"green",fontWeight:"bold",display:"inline-block",marginRight:10}},Math.round((t.actualPrice-t.discountedPrice)/t.actualPrice*100),"% OFF")),r.a.createElement("span",null,"(",t.stockCount," Left)")))};var ne=function(e){var t=e.product,a=e.isProductModalVisible,c=e.setIsProductModalVisible,i=Object(n.useState)(0),l=Object(d.a)(i,2),m=l[0],v=l[1],E=Object(n.useState)(!1),O=Object(d.a)(E,2),j=O[0],h=O[1],x=Object(n.useState)(!1),k=Object(d.a)(x,2),w=k[0],S=k[1],C=Object(f.useRecoilState)(y),I=Object(d.a)(C,2),P=I[0],L=I[1],M=Object(f.useRecoilState)(g),T=Object(d.a)(M,2),R=(T[0],T[1]),q=Object(f.useRecoilValue)(b),A=Object(D.f)(),B=function(){var e=Object(s.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=2;break}return e.abrupt("return",(R("You need to login first"),setTimeout((function(){return R(null)}),2e3)));case 2:return"buy"===a?S(!0):h(!0),e.next=5,V.addToCart({productId:t._id,quantity:1});case 5:return e.next=7,V.getCart();case 7:(n=e.sent).status&&L(n.data),h(!1),S(!1),"buy"===a&&A.push("/cart");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(G.a,{centered:!0,visible:a,onOk:function(){c(),v(0)},onCancel:function(){c(),v(0)},footer:null},t&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{style:{padding:10}},r.a.createElement(te.a,{value:m,slides:Object(o.a)(t.images.map((function(e){return r.a.createElement("div",{id:"image",style:{backgroundImage:"url(".concat(e,")")}})}))),onChange:function(e){return v(e)}}),r.a.createElement(ee.Dots,{value:m,onChange:function(e){return v(e)},number:t.images.length,thumbnails:Object(o.a)(t.images.map((function(e){return r.a.createElement("div",{id:"image",style:{backgroundImage:"url(".concat(e,")"),width:30,height:30,padding:0}})})))}))),r.a.createElement("div",null,r.a.createElement(ae,{product:t}),r.a.createElement("div",null,r.a.createElement("h4",{style:{marginTop:10}},"Highlights"),r.a.createElement("ul",{style:{fontSize:10,marginLeft:20}},t.features.map((function(e){return r.a.createElement("li",null,e)}))))),r.a.createElement("div",{style:{width:"65%",margin:"0 auto",display:"flex",justifyContent:"space-evenly"}},-1!==P.findIndex((function(e){return e.productId===t._id}))?r.a.createElement(z.b,{to:"/cart"},r.a.createElement(p.a,{type:"primary",loading:j},"GO TO CART")):r.a.createElement(p.a,{type:"primary",loading:j,onClick:B},"ADD TO CART"),r.a.createElement(p.a,{type:"danger",loading:w,onClick:function(){return B("buy")}},"BUY NOW"))))))},re=a(362),ce=a(366),ie=a(363),le=a(372),ue=re.a.Meta;var oe=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),b=l[0],v=l[1],y=Object(n.useState)(!1),O=Object(d.a)(y,2),h=O[0],x=O[1],k=Object(n.useState)(null),w=Object(d.a)(k,2),S=w[0],C=w[1],I=Object(f.useRecoilState)(g),P=Object(d.a)(I,2),L=P[0],M=P[1],T=Object(f.useRecoilState)(E),R=Object(d.a)(T,2),z=R[0],q=R[1],A=Object(n.useState)({}),W=Object(d.a)(A,2),_=W[0],N=W[1],U=Object(n.useState)(0),G=Object(d.a)(U,2),Y=G[0],J=G[1],K=Object(f.useResetRecoilState)(E),Q=Object(D.g)();Object(D.f)(),Object(n.useEffect)((function(){return X(),function(){return K()}}),[]);var X=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,n,r,i,l,s,p=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},c(!0),a=Q.pathname,n=Q.search,r=a.split("/"),i=r[r.length-1],r.length>2&&Object.assign(t,{categoryId:i}),n.replace("?","").split("&").forEach((function(e){var a=e.split("="),n=Object(d.a)(a,2),r=n[0],c=n[1];t[r]=c})),e.next=9,V.products(t);case 9:l=e.sent,c(!1),l.status?(q(Object(o.a)(l.data)),s={},l.data.forEach((function(e,t){return s[t]=0})),N(Object(j.a)({},s))):(M(l.message),setTimeout((function(){return M(null)}),2e3));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(H,{isLoading:a}),r.a.createElement(B,{setIsLoginModalVisible:function(){return v(!b)}}),r.a.createElement("div",{id:"body"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"0 20px 10px 0"}},r.a.createElement("div",null,r.a.createElement("h4",null,Q.search?r.a.createElement("span",null,r.a.createElement("span",null,"Search results for "),r.a.createElement("span",{style:{fontWeight:"bold",display:"inline-block",marginRight:15}},Q.search?Q.search.replace("?","").split("&").filter((function(e){return e.startsWith("search")}))[0].split("=")[1]:""),r.a.createElement(p.a,{type:"dashed",size:"small",onClick:function(){return window.location="/products"}},"Clear")):"")),r.a.createElement(ce.a,{overlay:r.a.createElement(ie.a,{onClick:function(e){J(e.key),X({sort:e.item.props.value})}},Object.entries({newest:"Newest","p-lth":"Price Low to High","p-htl":"Price High to Low"}).map((function(e,t){var a=Object(d.a)(e,2),n=a[0],c=a[1];return r.a.createElement(ie.a.Item,{key:t,value:n},r.a.createElement("span",{style:{color:t==Y?"red":"black"}},c))})))},r.a.createElement("span",null,r.a.createElement("span",null,"Sort By "),r.a.createElement("span",null,a&&z.length?r.a.createElement(F.a,null):r.a.createElement(le.a,null))))),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"}},z.map((function(e,t){return r.a.createElement(re.a,{hoverable:!0,style:{width:240,marginBottom:20},productId:e._id},r.a.createElement("div",{style:{padding:10}},r.a.createElement(te.a,{value:_[t],slides:Object(o.a)(e.images.map((function(t){return r.a.createElement("div",{onClick:function(t){x(!0),C(e)},id:"image",style:{backgroundImage:"url(".concat(t,")")}})}))),onChange:function(e){return N(Object(j.a)(Object(j.a)({},_),{},Object(Z.a)({},t,e)))}}),r.a.createElement(ee.Dots,{value:_[t],onChange:function(e){return N(Object(j.a)(Object(j.a)({},_),{},Object(Z.a)({},t,e)))},number:e.images.length})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ae,{product:e})),r.a.createElement(ue,{onClick:function(t){x(!0),C(e)},description:e.description,style:{textAlign:"center",padding:10,fontSize:12}}))})))),r.a.createElement("div",{style:{position:"absolute",zIndex:10}},r.a.createElement($,{isLoginModalVisible:b,setIsLoginModalVisible:function(){return v(!b)}}),r.a.createElement(ne,{product:S,isProductModalVisible:h,setIsProductModalVisible:function(){return x(!h)}})),L&&r.a.createElement("div",{id:"alert"},r.a.createElement(m.a,{message:"Error",description:L,type:"error",closable:!0,onClose:function(){return M(null)}})))},se=a(373),de=a(374);var pe=function(e){var t=e.quantity,a=e.stockCount,c=e.updateCart,i=e.productId,l=Object(n.useState)(t||1),o=Object(d.a)(l,2),m=o[0],f=o[1],b=Object(n.useState)(g),v=Object(d.a)(b,2),E=(v[0],v[1]),y=Object(n.useState)(!1),O=Object(d.a)(y,2),j=O[0],h=O[1],x=Object(n.useState)(!1),k=Object(d.a)(x,2),w=k[0],S=k[1],C=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!(t=a>0&&m+1)){e.next=10;break}return e.next=5,V.addToCart({productId:i,quantity:1});case 5:return e.next=7,c();case 7:f(t),e.next=12;break;case 10:E("Out of stock"),setTimeout((function(){return E(null)}),2e3);case 12:h(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),!(t=m>1&&m-1)){e.next=10;break}return e.next=5,V.removeFromCart({productId:i,quantity:1});case 5:return e.next=7,c();case 7:f(t),e.next=12;break;case 10:E("Out of stock"),setTimeout((function(){return E(null)}),2e3);case 12:S(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"}},r.a.createElement(p.a,{type:"primary",icon:r.a.createElement(se.a,null),size:"small",loading:w,onClick:I}),r.a.createElement("div",{style:{textAlign:"center",padding:2}},m),r.a.createElement(p.a,{type:"primary",icon:r.a.createElement(de.a,null),size:"small",loading:j,onClick:C}))},me=a(375);var fe=function(e){var t=e.item,a=e.updateCart,c=e.setCurrentProduct,i=e.setIsProductModalVisible,l=Object(n.useState)(!1),o=Object(d.a)(l,2),m=o[0],f=o[1],b=new Date;b.setDate(b.getDate()+3);var g=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,V.removeFromCart({productId:t.productId,quantity:t.quantity});case 3:e.sent.status&&a(),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",padding:10,borderBottom:"1px solid #ccc"}},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){c(t.product),i(!0)},id:"image",style:{backgroundImage:"url(".concat(t.product.images?t.product.images[0]:"",")"),height:70,width:40,backgroundPosition:"left",padding:0}}),r.a.createElement("div",null,r.a.createElement(pe,{quantity:t.quantity,stockCount:t.product.stockCount,updateCart:a,productId:t.productId}))),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"65% 30% 5%",width:"100%"}},r.a.createElement("div",{onClick:function(){c(t.product),i(!0)}},r.a.createElement(ae,{product:t.product})),r.a.createElement("div",{style:{fontSize:11}},r.a.createElement("span",null,"Delivery by ",b.toDateString())),r.a.createElement("div",null,r.a.createElement(p.a,{shape:"circle",icon:r.a.createElement(me.a,null),size:"small",loading:m,onClick:g}))))},be=a(376);var ge=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),b=l[0],v=l[1],E=Object(n.useState)(!1),O=Object(d.a)(E,2),h=O[0],x=O[1],k=Object(n.useState)(!1),w=Object(d.a)(k,2),S=w[0],C=w[1],I=Object(n.useState)(!1),P=Object(d.a)(I,2),L=P[0],M=P[1],T=Object(n.useState)(null),R=Object(d.a)(T,2),z=R[0],q=R[1],A=Object(f.useRecoilState)(g),W=Object(d.a)(A,2),_=W[0],F=W[1],N=Object(f.useRecoilState)(y),U=Object(d.a)(N,2),Y=U[0],J=U[1],K=Object(f.useResetRecoilState)(y),Q=Object(D.f)(),X=new Date;X.setDate(X.getDate()+3),Object(n.useEffect)((function(){return Z(),function(){return K()}}),[]);var Z=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,V.getCart();case 3:t=e.sent,c(!1),t.status?J(Object(o.a)(t.data)):(F(t.message),setTimeout((function(){return F(null)}),2e3));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),t={products:Y.map((function(e){return{productId:e.productId,quantity:e.quantity}}))},e.next=4,V.placeOrder(Object(j.a)({},t));case 4:if(a=e.sent,C(!1),!a.status){e.next=12;break}return x(!0),e.next=10,Z();case 10:e.next=14;break;case 12:F(a.message),setTimeout((function(){return F(null)}),2e3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){return x(!1),Q.push("/")};return r.a.createElement("div",null,r.a.createElement(H,{isLoading:a}),r.a.createElement(B,{setIsLoginModalVisible:function(){return v(!b)}}),r.a.createElement("div",{style:{margin:"10px 20%",display:"grid",gridTemplateColumns:"70% 30%",gridGap:10}},r.a.createElement("div",{style:{border:"1px solid #ccc"}},r.a.createElement("h3",{style:{borderBottom:"1px solid #ccc",paddingLeft:10}},"My Cart (",Y.length,")"),Y.map((function(e){return r.a.createElement(fe,{item:e,updateCart:Z,setCurrentProduct:function(e){return q(e)},setIsProductModalVisible:function(){return M(!0)}})}))),r.a.createElement("div",{style:{border:"1px solid #ccc"}},r.a.createElement("h3",{style:{borderBottom:"1px solid #ccc",paddingLeft:10}},"Price Details"),r.a.createElement("div",{style:{margin:"0 10px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:10}},r.a.createElement("span",null,"Price (",Y.length," ",Y.length>1?"items":"item",")"),r.a.createElement("span",{style:{textAlign:"right"}},"\u20b9",Y.reduce((function(e,t){return{total:e.total+t.quantity*t.product.discountedPrice}}),{total:0}).total)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:10,borderBottom:"1px dashed #ccc"}},r.a.createElement("span",null,"Delivery Charges"),r.a.createElement("span",{style:{color:"green"}},"FREE")),r.a.createElement("div",{style:{fontSize:11,padding:"10px 0",textAlign:"center"}},"You will save"," ",r.a.createElement("span",{style:{color:"green"}},"\u20b9",Y.reduce((function(e,t){return{total:e.total+t.quantity*(t.product.actualPrice-t.product.discountedPrice)}}),{total:0}).total)," on this order"),!!Y.length&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:15}},r.a.createElement(p.a,{type:"danger",loading:S,onClick:ee},"PLACE ORDER"))))),r.a.createElement(G.a,{centered:!0,visible:h,onOk:te,onCancel:te,footer:null},r.a.createElement("div",{style:{textAlign:"center",paddingTop:24}},r.a.createElement(be.a,{twoToneColor:"#52c41a",style:{fontSize:100,textAlign:"center"}}),r.a.createElement("h3",{style:{marginTop:20}},"Order Placed Successfully"))),r.a.createElement("div",{style:{position:"absolute",zIndex:10}},r.a.createElement($,{isLoginModalVisible:b,setIsLoginModalVisible:function(){return v(!b)}}),r.a.createElement(ne,{product:z,isProductModalVisible:L,setIsProductModalVisible:function(){return M(!L)}})),_&&r.a.createElement("div",{id:"alert"},r.a.createElement(m.a,{message:"Error",description:_,type:"error",closable:!0,onClose:function(){return F(null)}})))},ve=a(360),Ee=a(377),ye=ve.a.Panel;var Oe=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),p=l[0],b=l[1],v=Object(n.useState)(!1),E=Object(d.a)(v,2),y=E[0],j=E[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),k=x[0],w=x[1],S=Object(n.useState)(null),C=Object(d.a)(S,2),I=C[0],P=C[1],L=Object(f.useRecoilState)(g),M=Object(d.a)(L,2),T=M[0],R=M[1],z=Object(f.useRecoilState)(O),q=Object(d.a)(z,2),A=q[0],W=q[1],_=Object(f.useResetRecoilState)(O),F=Object(D.f)(),N=new Date;N.setDate(N.getDate()+3),Object(n.useEffect)((function(){return U(),function(){return _()}}),[]);var U=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,V.getMyOrders();case 3:t=e.sent,c(!1),t.status?W(Object(o.a)(t.data)):(R(t.message),setTimeout((function(){return R(null)}),2e3));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){var t=new Date(e.createdAt);return t.setDate(t.getDate()+3),(t>new Date?"To be delivered by ":"Delivered on ")+t.toDateString()},J=function(){return j(!1),F.push("/")};return r.a.createElement("div",null,r.a.createElement(H,{isLoading:a}),r.a.createElement(B,{setIsLoginModalVisible:function(){return b(!p)}}),r.a.createElement("div",{style:{margin:"10px 20%"}},r.a.createElement("h2",null,"My Orders"),r.a.createElement(ve.a,null,A.map((function(e){return r.a.createElement(ye,{header:"Order No : "+e._id,key:e._id,extra:r.a.createElement("div",null,r.a.createElement(Ee.a,{style:{color:"#52c41a"}}),r.a.createElement("span",null," ",Y(e)))},e.products.map((function(t){var a=t.product,n=t.quantity;return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"10% 50% 20% 20%",borderBottom:"1px solid #ccc",padding:"0 10px"}},r.a.createElement("div",{onClick:function(){P(a),w(!0)},id:"image",style:{backgroundImage:"url(".concat((null===a||void 0===a?void 0:a.images[0])||"",")"),height:100,width:60,backgroundPosition:"left",padding:0}}),r.a.createElement("div",{style:{alignSelf:"center"}},r.a.createElement("h3",{style:{cursor:"default"},onClick:function(){P(a),w(!0)}},a.name),r.a.createElement("h4",null,"Quantity - ",n)),r.a.createElement("h3",{style:{alignSelf:"center"}},"\u20b9",a.discountedPrice),r.a.createElement("h4",{style:{alignSelf:"center"}},Y(e)))})))})))),r.a.createElement(G.a,{centered:!0,visible:y,onOk:J,onCancel:J,footer:null},r.a.createElement("div",{style:{textAlign:"center",paddingTop:24}},r.a.createElement(be.a,{twoToneColor:"#52c41a",style:{fontSize:100,textAlign:"center"}}),r.a.createElement("h3",{style:{marginTop:20}},"Order Placed Successfully"))),r.a.createElement("div",{style:{position:"absolute",zIndex:10}},r.a.createElement($,{isLoginModalVisible:p,setIsLoginModalVisible:function(){return b(!p)}}),r.a.createElement(ne,{product:I,isProductModalVisible:k,setIsProductModalVisible:function(){return w(!k)}})),T&&r.a.createElement("div",{id:"alert"},r.a.createElement(m.a,{message:"Error",description:T,type:"error",closable:!0,onClose:function(){return R(null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(){var e=Object(D.g)();return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,e.pathname)))}i.a.render(r.a.createElement(f.RecoilRoot,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(z.a,{basename:"/shopping-cart"},r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/"},r.a.createElement(X,null)),r.a.createElement(D.a,{path:"/products"},r.a.createElement(oe,null)),r.a.createElement(D.a,{path:"/cart"},r.a.createElement(ge,null)),r.a.createElement(D.a,{path:"/orders"},r.a.createElement(Oe,null)),r.a.createElement(D.a,{path:"*"},r.a.createElement(je,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[183,1,2]]]);
//# sourceMappingURL=main.cb61a75d.chunk.js.map